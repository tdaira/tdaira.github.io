<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>bleRPC - Type-safe, Secure BLE Communication with Protocol Buffers</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header></header>

  <main>
    <div class="hero">
      <div class="hero-logo"></div>
      <p>Type-safe, secure, high-performance RPC<br>over Bluetooth Low Energy using Protocol Buffers.</p>
    </div>

    <div class="features">
      <div class="feature">
        <div class="feature-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <path d="M9 13l-2 2 2 2"/>
            <path d="M15 13l2 2-2 2"/>
          </svg>
        </div>
        <h3>Protocol Buffers</h3>
        <p>Define your BLE communication with <code>.proto</code> files. Get type-safe, language-agnostic serialization with zero ambiguity.</p>
      </div>
      <div class="feature">
        <div class="feature-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
          </svg>
        </div>
        <h3>High Performance</h3>
        <p>Achieves near-maximum BLE throughput (~30 KB/s) with MTU-aware fragmentation and zero-copy optimizations.</p>
      </div>
      <div class="feature">
        <div class="feature-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <rect x="5" y="2" width="14" height="20" rx="2"/>
            <line x1="12" y1="18" x2="12.01" y2="18"/>
          </svg>
        </div>
        <h3>Multi-Platform</h3>
        <p>Run on iOS, Android, macOS, Linux, and embedded devices (nRF54, EFR32) with consistent APIs.</p>
      </div>
      <div class="feature">
        <div class="feature-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
        </div>
        <h3>End-to-End Encryption</h3>
        <p>Optional <a href="encryption.html">E2E encryption</a> with X25519 key exchange, Ed25519 signatures, and AES-128-GCM session encryption.</p>
      </div>
    </div>

    <h2>How It Works</h2>
    <p>bleRPC provides a layered protocol stack on top of BLE GATT:</p>
    <ol>
      <li><strong>Command Layer</strong> &mdash; Wraps Protocol Buffers payloads with command metadata (name, type, data length).</li>
      <li><strong>Encryption Layer</strong> (optional) &mdash; Encrypts the serialized command with AES-128-GCM after a <a href="encryption.html">4-step key exchange</a>.</li>
      <li><strong>Container Layer</strong> &mdash; Fragments payloads into MTU-sized containers for BLE transmission, with reassembly on the receiving side.</li>
    </ol>
    <p>All communication uses a single GATT Characteristic: the Central writes requests via <em>Write Without Response</em> and receives responses via <em>Notify</em>.</p>

    <div class="diagram">
      <pre class="mermaid" id="sequence-diagram">
sequenceDiagram
    participant C as Central&lt;br/&gt;(iOS / Android / Python)
    participant P as Peripheral&lt;br/&gt;(Zephyr / Python)
    Note over C: Protobuf encode + Command wrap
    Note over C: Encrypt (if enabled)
    Note over C: Split into MTU containers
    C->>+P: Write Without Response (containers)
    Note over P: Reassemble containers
    Note over P: Decrypt (if enabled)
    Note over P: Decode command + Protobuf
    Note over P: Execute handler
    Note over P: Encode response + Encrypt + Split
    P->>-C: Notify (containers)
    Note over C: Reassemble + Decrypt + Decode
      </pre>
    </div>

    <h2>Supported Platforms</h2>

    <h3>Central (Client)</h3>
    <table>
      <thead><tr><th>Platform</th><th>Language</th><th>BLE Stack</th><th>Status</th></tr></thead>
      <tbody>
        <tr><td>iOS</td><td>Swift</td><td>CoreBluetooth</td><td><span class="badge badge-green">Stable</span></td></tr>
        <tr><td>Android</td><td>Kotlin</td><td>Android BLE</td><td><span class="badge badge-green">Stable</span></td></tr>
        <tr><td>macOS / Linux</td><td>Python</td><td>bleak</td><td><span class="badge badge-green">Stable</span></td></tr>
        <tr><td>Zephyr (nRF54L15)</td><td>C</td><td>Zephyr BLE</td><td><span class="badge badge-green">Stable</span></td></tr>
      </tbody>
    </table>

    <h3>Peripheral (Server)</h3>
    <table>
      <thead><tr><th>Platform</th><th>Language</th><th>BLE Stack</th><th>Status</th></tr></thead>
      <tbody>
        <tr><td>Zephyr (nRF54L15)</td><td>C</td><td>Zephyr BLE</td><td><span class="badge badge-green">Stable</span></td></tr>
        <tr><td>Zephyr (EFR32xG22E)</td><td>C</td><td>Zephyr BLE + SiLabs HCI</td><td><span class="badge badge-green">Stable</span></td></tr>
        <tr><td>macOS</td><td>Python</td><td>bless</td><td><span class="badge badge-green">Stable</span></td></tr>
      </tbody>
    </table>

    <h3>Protocol Libraries</h3>
    <table>
      <thead><tr><th>Language</th><th>Package</th><th>Dependencies</th></tr></thead>
      <tbody>
        <tr><td>Swift</td><td><a href="https://github.com/tdaira/blerpc-protocol-swift">blerpc-protocol-swift</a></td><td>Foundation only</td></tr>
        <tr><td>Kotlin</td><td><a href="https://github.com/tdaira/blerpc-protocol-kt">blerpc-protocol-kt</a></td><td>Protobuf JavaLite</td></tr>
        <tr><td>Python</td><td><a href="https://github.com/tdaira/blerpc-protocol">blerpc-protocol</a></td><td>None</td></tr>
        <tr><td>C</td><td><a href="https://github.com/tdaira/blerpc-protocol">blerpc-protocol/c</a></td><td>None</td></tr>
      </tbody>
    </table>
  </main>

  <footer></footer>

  <script src="script.js"></script>
</body>
</html>
